{% extends "layout.html" %}
{% load template_tags %}
{% block title %}
  {{ qset.name }} Data
{% endblock %}

{% block search %}
{% include "view_data_filter_form.html" with a_form=locations_filter no_button=True filter_id='loc_data_filter' %}

{% endblock %}
{% block content_search %}
    {% include "search_form.html" %}
{% endblock %}
{% block page_actions %}
{% if selected_qset %}
<div class="col-lg-12" style="margin-top: -18px;margin-left: 21px;">
                         <a style="padding-left: 4px;padding-right: 3px;" id="export_question" class="btn btn-white btn-warning btn-bold" href="{% url 'download_qset_data' selected_qset.id %}?{{request.GET.urlencode}}" id="download_qset_data">
                        <i class="ace-icon fa fa-external-link bigger-120 "></i>
                         Export Data</a>
		</div>
{% endif %}
{% endblock %}
{% block content %}
{% load pagination_tags %}
{% autopaginate interviews items_per_page %}
<br>
<div style="overflow-x:auto; width: 100%;">
{% if report %}
    {{ report }}
{% else %}
<table id="datatables" class="table table-striped table-bordered table-hover table-sort ">
<!-- <table id="" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="dynamic-table_info">
 -->
 <thead>
        <tr role="row">
            {% for loc_type in location_filter_types %}
                <th class="sorting" tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" aria-label="Update	: activate to sort column ascending">
                    {{ loc_type.name }}
                </th>
            {% endfor %}
            <th class="sorting" tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" aria-label="Update	: activate to sort column ascending">Enumeration Area</th>
            <th class="sorting" tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" aria-label="Update	: activate to sort column ascending">Interviewer</th>
            <th class="sorting" tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" aria-label="Update	: activate to sort column ascending">Survey</th>
            <th class="sorting" tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" aria-label="Update	: activate to sort column ascending">{{model_class.verbose_name}}</th>
            {% for question in selected_qset.flow_questions %}
            <th class="sorting" tabindex="0" aria-controls="dynamic-table" rowspan="1" colspan="1" aria-label="Update	: activate to sort column ascending">{{ question.identifier|upper }}</th>
            {% endfor %}
         </tr>
    </thead>
    <tbody>
        {% for interview in interviews %}
          <tr>
            {% for loc in interview.ea.parent_locations %}
              <td>
                {{ loc.name }}
              </td>
            {% endfor %}
           <td>
            {{ interview.ea.name}}
          </td>
           <td>
            {{ interview.interviewer.name}}
          </td>
          <td>
            {{ interview.survey.name}}
          </td>
          <td>
            {{ interview.question_set.name }}
          </td>
            {% for question in selected_qset.flow_questions %}
              {% get_answer question interview as answer %}
                <td>
                    {{ answer }}
                </td>
           {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
{% endif %}
</div>
{% paginate %}
{% endblock %}

{% block javascripts %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/dataTables.bootstrap.css" type="text/css">

<script src="{{ STATIC_URL }}/js/jquery.dataTables.js"></script>
<script src="{{ STATIC_URL }}/js/dataTables.bootstrap.js" type="text/javascript" charset="utf-8"></script>
  <script src="{{STATIC_URL}}js/location-widget.js" type="text/javascript" charset="utf-8"></script>
{% endblock %}