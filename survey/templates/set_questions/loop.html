{% extends "form.html" %}

{% block title %}
    Loop Start
{% endblock %}
{% block pre_form_content %}
     <h4> From question: {{question.text}} <h4>
{% endblock%}
{% block display_form_fields %}

{% include "naked_form.html" with a_form=loop_form %}

{% endblock %}
    {% block buttons %}
  <div class="form-actions">
    <button id="button" type="submit" class="btn btn-primary submit" name="save_button" data-disabled-text="{{ loading_text }}">Save</button>

    {% if cancel_url %}
      <a href="{{ cancel_url }}" class="btn btn-primary" name="cancel_button" class="cancel">Cancel</a>
    {% else %}
      <a href="#" class="btn btn-primary" name="cancel_button" id="cancel_{{ id }}" class="cancel">Cancel</a>
    {% endif %}
  </div>
    {% endblock %}

{% block javascripts %}
        <script type="text/javascript">
            $(function(){
                 $('#id_previous_numeric_values-control-group').hide();
                 $('#id_repeat_count-control-group').hide();
                 $('#id_previous_numeric_values').prop('disabled', true);
                 $('#id_repeat_count').prop('disabled', true);
                 $('#id_repeat_logic').change(function(){
                    switch($(this).val()) {
                        case('{{loop_form.FIXED_COUNT}}'):
                            $('#id_repeat_count-control-group').show();
                            $('#id_previous_numeric_values-control-group').hide();
                            $('#id_previous_numeric_values').prop("disabled", true);;
                            $('#id_repeat_count').prop("disabled", false);
                            break;
                        case('{{loop_form.PREVIOUS_ANSWER_COUNT}}'):
                            $('#id_repeat_count-control-group').hide();
                            $('#id_previous_numeric_values-control-group').show();
                            $('#id_previous_numeric_values').prop("disabled", false);;
                            $('#id_repeat_count').prop("disabled", true);
                            break;
                        default:
                            $('#id_repeat_count-control-group').hide();
                            $('#id_previous_numeric_values-control-group').hide();
                            $('#id_previous_numeric_values').prop('disabled', true);
                            $('#id_repeat_count').prop('disabled', true);
                    }
                });
            });
        </script>
{% endblock %}